<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<title>beyond Admin后台</title>

<meta name="description" content="Dashboard">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--Basic Styles-->
<link href="__ADMIN__/style/bootstrap.css" rel="stylesheet">
<link href="__ADMIN__/style/font-awesome.css" rel="stylesheet">
<link href="__ADMIN__/style/weather-icons.css" rel="stylesheet">

<!--Beyond styles-->
<link id="beyond-link" href="__ADMIN__/style/beyond.css" rel="stylesheet" type="text/css">
<link href="__ADMIN__/style/demo.css" rel="stylesheet">
<link href="__ADMIN__/style/typicons.css" rel="stylesheet">
<link href="__ADMIN__/style/animate.css" rel="stylesheet">

</head>
<body>
<!-- 头部 -->
{include file='commons/header'}

<!-- /头部 -->

<div class="main-container container-fluid">
<div class="page-container">
<!-- Page Sidebar -->
{include file='commons/left'}
<!-- /Page Sidebar -->
<!-- Page Content -->
<div class="page-content">
<!-- Page Breadcrumb -->
<div class="page-breadcrumbs">
<ul class="breadcrumb">
            <li>
<a href="#">系统</a>
</li>
            <li class="active">用户管理</li>
            </ul>
</div>
<!-- /Page Breadcrumb -->

<!-- Page Body -->
<div class="page-body">

<button type="button" tooltip="添加用户" class="btn btn-sm btn-azure btn-addon" onClick="javascript:window.location.href = '{:url("tpfield/add")}'"> <i class="fa fa-plus"></i> Add
</button>
<div class="row">
<div class="col-lg-12 col-sm-12 col-xs-12">
<div class="widget">
<div class="widget-body">
<div class="flip-scroll">
    <form action="" method='post'>
<table class="table table-bordered table-hover">
<thead class="">
<tr>
    <th class="text-center">ID</th>
    <th class="text-center">排序</th>
    <th class="text-center">中文名称</th>
     <th class="text-center">英文名称</th>
    <th class="text-center">字段类型</th>
    <th class="text-center">所属模型</th>
    <th class="text-center" width='20%'>操作</th>
</tr>
</thead>
<tbody>
{volist name='fieldRes' id='vo'}                  
    <tr>
      <td align="center">{$vo['id']}</td>
      <td align="center">
        <input type="text" style="width:50px;text-align:center;" value="{$vo['sort']}" name="{$vo['id']}">
      </td>
      <td align="center">{$vo['field_cname']}</td>
      <td align="center">{$vo['field_ename']}</td>
<!-- 字段类型:1单行文本,2多行文本,3单选按钮,4复选框,5下拉菜单,6附件,7浮点,8模型,9长文本类型 -->
      <td align="center">
        {switch name=$vo['field_type']}
            {case value="1"}单行文本{/case}
            {case value="2"}多行文本{/case}
            {case value="3"}单选按钮{/case}
            {case value="4"}复选框{/case}
            {case value="5"}下拉菜单{/case}
            {case value="6"}附件{/case}
            {case value="7"}浮点{/case}
            {case value="8"}模型{/case}
            {case value="9"}长文本类型{/case}
        {/switch}
      </td>
      <td align="center">{$vo->models->model_name}</td>
        <td align="center">
            <a href="{:url('tpfield/edit',array('fieldid'=>$vo['id']))}" class="btn btn-primary btn-sm shiny">
                <i class="fa fa-edit"></i> 编辑
            </a>
            <a href="#" onClick="ajaxdel(this);" class="btn btn-danger btn-sm shiny" id="{$vo['id']}" table_name="{$vo->models->table_name}" field_name="{$vo['field_ename']}">
                <i class="fa fa-trash-o"></i> 删除
            </a>
        </td>
    </tr>
{/volist}
    </tbody>

</table>

    <div>
        <input type="submit" class='btn btn-primary btn-sm shiny' style='margin-left:164px;margin-top:10px;' value='排序'>
    </div>


</form>

</div>
<div>

<div class="div" style='margin-top:20px;'>


</div>
      
        </div>
</div>
</div>
</div>
</div>
</div>
<!-- /Page Body -->
</div>
<!-- /Page Content -->
</div>  
</div>

<!--Basic Scripts-->
<script src="__ADMIN__/style/jquery_002.js"></script>
<script src="__ADMIN__/style/bootstrap.js"></script>
<script src="__ADMIN__/style/jquery.js"></script>
<!--Beyond Scripts-->
<script src="__ADMIN__/style/beyond.js"></script>


<link rel='stylesheet' href="__ADMIN__/layui/css/layui.css">
<script src="__ADMIN__/layui/layui.js"></script>
<script>
    layui.use(['layer', 'form'], function(){
  var layer = layui.layer,form = layui.form;
});

function ajaxdel(o){
        // alert('您好啊');

        layer.confirm('确定要删除该字段吗?', {icon: 3, title:'提示'}, function(index){
        var fieldid=$(o).attr('id');
        var table_name=$(o).attr('table_name');
        var field_name=$(o).attr('field_name');
                    $.ajax({
                        type:'get',
                        dataType:'json',
                        async:false,
                        url:"/admin/tpfield/ajaxdel/fieldid/"+fieldid+"/table_name/"+table_name+"/field_name/"+field_name,
                        success:function(data){  
                            if(data==1){
                                layer.msg('删除字段成功!',{icon:1});
                                $(o).parents('tr').hide();
                            }else{
                                layer.msg('删除字段失败!',{icon:1});
                            }
                        }
                    })
                 layer.close(index);
        });
}
</script>









</body></html>